(function(){var a=null,b={settings:{jquery_atleast_version:"1.5",jquery_url:"ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js",google_api_url:"http://www.google.com/jsapi",search_input:".edys-search-input",search_form:".edys-search",autorun_init:!0,autorun_search:!0,init_complete:null},run:function(){typeof window.edys_site_search_options!="undefined"?(typeof window.edys_site_search_options.autorun_init!="undefined"&&(this.settings.autorun_init=window.edys_site_search_options.autorun_init),typeof window.edys_site_search_options.autorun_search!="undefined"&&(this.settings.autorun_search=window.edys_site_search_options.autorun_search)):window.edys_site_search_options={},this.settings.autorun_init&&typeof window.edys_site_search_options.loaded=="undefined"&&(window.edys_site_search_options.loaded=!0,this.get_missing_scripts(function(){a.extend(!0,this.settings,window.edys_site_search_options),c(a),this.settings.autorun_search?a(document).ready(a.proxy(function(){a(this.settings.search_form).site_search(this.settings),this.settings.init_complete?this.settings.init_complete(a):a("body").trigger("Edys_search_init_complete",a)},this)):this.settings.init_complete?this.settings.init_complete(a):a("body").trigger("Edys_search_init_complete",a)}))},get_missing_scripts:function(c){this.get_jquery(function(){b.settings.autorun_search&&a(b.settings.search_form).bind("submit.siteSearch",function(){return!1}),b.loadGoogle(a.proxy(c,b))})},load_script:function(a,b){(function(c,d){var e=c.createElement(d);e.onload=b;var g=location.protocol!="file:"?location.protocol:"http:";e.src=g+"//"+a,e.onreadystatechange=function(){(this.readyState=="complete"||this.readyState=="loaded")&&b()},(c.getElementsByTagName("head")[0]||c.documentElement).appendChild(e)})(document,"script")},get_jquery:function(b){if(window.jQuery===undefined)this.load_script(this.settings.jquery_url,function(){a=window.jQuery.noConflict(!0),b()});else if(window.jQuery.fn.jquery<this.settings.jquery_atleast_version){var c=window.jQuery,d=window.$!==undefined?window.$:null;this.load_script(this.settings.jquery_url,function(){a=window.jQuery.noConflict(!0),window.jQuery=c,d!=null&&(window.$=d),b()})}else a=window.jQuery,b()},loadGoogle:function(b){typeof window.google=="undefined"?a.getScript(this.settings.google_api_url,function(){google=window.google,google.load("search","1",{nocss:!0,callback:b})}):google.load("search","1",{nocss:!0,callback:b})}};b.run();var c=function(a){var b=function(b,c){this.default_images_url="http://static.edicy.com/assets/site_search/3.0/",this.settings={search_input:".edys-search-input",close_btn_class:"edys-search-container-close",noresults_class:"edys-search-container-noresults",popup_class:"edys-search-popup",masking_iframe_class:"edys-search-masking-iframe",fin_class:"edys-search-fin",fin_left_class:"edys-search-fin-left",fin_right_class:"edys-search-fin-right",fin_top_class:"edys-search-fin-top",fin_bottom_class:"edys-search-fin-bottom",system_classes:{close_btn:"edys-sw-search-container-close",noresults:"edys-sw-search-container-noresults",popup:"edys-sw-search-popup",masking_iframe:"edys-sw-search-masking-iframe",fin:"edys-sw-search-fin",fin_left:"edys-sw-search-fin-left",fin_right:"edys-sw-search-fin-right",fin_top:"edys-sw-search-fin-top",fin_bottom:"edys-sw-search-fin-bottom",default_stylesheet:"edys-sw-default-stylesheet"},default_popup_style:{position:"absolute",display:"none"},default_closebtn_style:{cursor:"pointer"},default_stylesheet:'.edys-sw-search-popup { background: #e1e1e1; -moz-border-radius: 5px; -webkit-border-radius: 5px; border-radius: 5px; width: 330px; position: absolute; z-index: 10000; -moz-box-shadow: 0px 2px 15px rgba(0,0,0,0.15); -webkit-box-shadow: 0px 2px 15px rgba(0,0,0,0.15); box-shadow: 0px 2px 15px rgba(0,0,0,0.15); color: #484d4f; font-size: 12px; font: 12px/14px "Helvetica Neue", Helvetica, Arial, sans-serif; padding: 10px 0px 10px 0px; -moz-text-shadow: 0 1px 0 #ffffff; -webkit-text-shadow: 0 1px 0 #ffffff; text-shadow: 0 1px 0 #ffffff; text-align: left; -moz-opacity: 0.95; -webkit-opacity: 0.95; opacity: 0.95; } .edys-sw-search-popup table { border-collapse: collapse; } .edys-sw-search-popup .gs-title { color: #1b2124; font-weight: bold; text-decoration: none; padding: 0 0 10px 0; } .edys-sw-search-container-close { display: block; float: right; overflow: hidden; width: 10px; height: 11px; clear: both; margin-right: 10px; background: url("'+this.default_images_url+'site-search-closebtn.png") no-repeat right 0; } .edys-sw-search-masking-iframe { width: 340px; position: absolute; border: none; z-index: 9000; } .edys-sw-search-container-noresults { padding: 20px; text-align: center; } .edys-sw-search-popup .gsc-result-siteSearch { margin: 0px 10px 10px 10px; overflow: hidden; } .edys-sw-search-popup .gsc-results { padding-top: 30px; margin-top: -20px; } .edys-sw-search-popup .gsc-cursor-box { border-top: 1px solid #b9b9b9; padding-top: 10px; font-size: 14px; color: #0066bb; text-align: right; padding-right: 10px; } .edys-sw-search-popup .gsc-cursor-page { display: inline; cursor: pointer; padding: 3px 5px; } .edys-sw-search-popup .gsc-cursor-page:hover, .edys-sw-search-popup .gsc-cursor-current-page { color: #484d4f; } .edys-sw-search-popup .gsc-cursor-current-page { font-weight: bold; } .edys-sw-search-popup .gsc-resultsHeader, .edys-sw-search-popup .gsc-twiddle, .edys-sw-search-popup .gs-watermark, .edys-sw-search-popup .gs-visibleUrl, .edys-sw-search-popup .gsc-trailing-more-results { display: none; } .edys-sw-search-fin { width:0px; height:0px; position: absolute; border-width: 20px; margin-top:-20px; margin-left:-20px; border-style: solid; border-color: #e1e1e1; } .edys-sw-search-fin-left { margin-right:-40px; border-top-color: transparent !important; border-right-color: transparent !important; border-bottom-color: transparent !important;} .edys-sw-search-fin-right { margin-left: -40px; border-top-color: transparent !important; border-left-color: transparent !important; border-bottom-color: transparent !important;  } .edys-sw-search-fin-top { margin-bottom:-40px; border-left-color: transparent !important; border-right-color: transparent !important; border-bottom-color: transparent !important;  } .edys-sw-search-fin-bottom { margin-top: -40px; border-top-color: transparent !important; border-right-color: transparent !important; border-left-color: transparent !important;}',default_stylesheet_enabled:!0,popup_position:"auto",popup_min_margin:10,fin_style:{},display_fin:!0,fin_shift_percent:.3,without_popup:!1,without_popup_element_id:"",without_popup_noresults_id:"",texts:{close:"",noresults:"Your search did not match any documents"},link_target:"_self",sideclick_enabled:!0,host_name:document.location.hostname.replace(/^www./,"")},this.search_control=null,this.search_options=null,this.search_websearch=null,this.is_ie_lte_7=typeof a.browser.msie!="undefined"&&parseInt(a.browser.version,10)<=7?!0:!1,this.current_input=null,this.search_popup=null,this.search_iframe=null,this.form_element=b,this.init(c)};b.prototype={init:function(b){b&&a.extend(!0,this.settings,b),this.settings.default_stylesheet_enabled&&this.add_stylesheet(this.settings.default_stylesheet);var c=this.form_element.find(this.settings.search_input);this.settings.without_popup?this.init_without_popup():this.init_popup(),this.form_element.bind("submit",a.proxy(this.submit_form,this)),this.form_element.data("EdysSearchObject",this)},init_popup:function(){var b=a("<div></div>").addClass(this.settings.system_classes.popup).addClass(this.settings.popup_class).css(this.settings.default_popup_style),c=a("<iframe></iframe>").addClass(this.settings.system_classes.masking_iframe).addClass(this.settings.masking_iframe_class).hide(),d=a("<div></div>").addClass(this.settings.system_classes.noresults).addClass(this.settings.noresults_class).html(this.settings.texts.noresults),e=a("<div></div>").addClass(this.settings.system_classes.close_btn).addClass(this.settings.close_btn_class).css(this.settings.default_closebtn_style).html(this.settings.texts.close).bind("click.siteSearch",a.proxy(function(){this.popup_hide()},this)),f=a("<div></div>").addClass(this.settings.system_classes.fin).addClass(this.settings.fin_class).css(this.settings.fin_style);a(document.body).prepend(c,b),this.search_popup=b,this.search_iframe=c,this.configure_google_search({popup_element:b,hostname:this.settings.host_name,link_target:this.settings.link_target,complete_function:this.search_complete}),b.find(".gsc-search-box").hide(),b.prepend(e,d),this.settings.display_fin&&b.prepend(f),"onorientationchange"in window?a(window).bind("orientationchange.siteSearch",a.proxy(function(){this.resize_window(b)},this)):a(window).bind("resize.siteSearch",a.proxy(function(){this.resize_window(b)},this))},init_without_popup:function(){this.configure_google_search({popup_element:a("#"+this.settings.without_popup_element_id),hostname:this.settings.host_name,link_target:this.settings.link_target,complete_function:this.search_complete}),a("#"+this.settings.without_popup_element_id).find(".gsc-search-box").hide()},popup_hide:function(){var b=this.settings;b.sideclick_enabled&&a(document.body).unbind("click.siteSearch"),a("."+b.system_classes.popup).hide(),a("."+b.system_classes.masking_iframe).hide(),this.current_input=null},resize_window:function(a){var b=this.current_input;b!==null&&this.position_popup(a,b)},submit_form:function(){this.form_element.trigger("beforeSearch");var b=this.form_element.find(this.settings.search_input),c=b.offset(),d=b.val();c.height=b.outerHeight(),c.width=b.outerWidth(),this.search_control.setSearchCompleteCallback(this,a.proxy(function(){this.search_complete(b)},this)),this.search_control.execute(d);return!1},configure_google_search:function(b){var c=this.search_control=new google.search.SearchControl,d=this.search_options=new google.search.SearcherOptions,e=this.search_websearch=new google.search.WebSearch;d.setExpandMode(google.search.SearchControl.EXPAND_MODE_OPEN),e.setUserDefinedClassSuffix("siteSearch"),e.setSiteRestriction(b.hostname),c.addSearcher(e,d),c.setSearchCompleteCallback(this,a.proxy(b.complete_function,this));switch(b.link_target){case"_blank":c.setLinkTarget(google.search.Search.LINK_TARGET_BLANK);break;case"_top":c.setLinkTarget(google.search.Search.LINK_TARGET_TOP);break;case"_parent":c.setLinkTarget(google.search.Search.LINK_TARGET_PARENT);break;default:c.setLinkTarget(google.search.Search.LINK_TARGET_SELF)}c.draw(b.popup_element.get(0))},search_complete:function(b){var c=this.search_popup,d=this.settings.without_popup?a("#"+this.settings.without_popup_element_id).find(".gsc-stats").html():c.find(".gsc-stats").html(),e=this.settings.without_popup?a("#"+this.settings.without_popup_noresults_id):c.find(" ."+this.settings.system_classes.noresults);d=="(0)"?e.show():e.hide(),this.settings.without_popup||(c.css({visibility:"hidden"}).show(),typeof b!="undefined"&&(this.position_popup(c,b),this.search_iframe.show(),this.current_input=b,this.settings.sideclick_enabled&&a(document.body).bind("click.siteSearch",a.proxy(function(b){a(b.target).parents().filter(this.search_popup).length==0&&b.target!=this.search_popup.get(0)&&this.popup_hide()},this))),c.css({visibility:"visible"})),this.form_element.trigger("afterSearch")},position_popup:function(b,c){var d={top:a(window).scrollTop(),left:a(window).scrollLeft(),bottom:a(window).scrollTop()+a(window).height(),right:a(window).scrollLeft()+a(window).width()},e=c.offset(),f=null;e.bottom=e.top+c.outerHeight(),e.right=e.left+c.outerWidth(),e.width=c.outerWidth(),e.height=c.outerHeight();if(this.settings.display_fin){var g=a("."+this.settings.system_classes.fin);f={width:g.outerWidth()+parseInt(g.css("borderLeftWidth"),10)+parseInt(g.css("borderRightWidth"),10),height:g.outerHeight()+parseInt(g.css("borderTopWidth"),10)+parseInt(g.css("borderBottomWidth"),10)}}else f=!1;var h=f!=!1?f.height:0;switch(this.settings.popup_position){case"auto":d.right>e.right+b.width()&&d.top<e.top-h/2?this.position_popup_right(b,c,d,e,f):d.left<e.left-b.width()&&d.top<e.top-h/2?this.position_popup_left(b,c,d,e,f):d.top<e.top-b.outerHeight()?this.position_popup_top(b,c,d,e,f):this.position_popup_bottom(b,c,d,e,f);break;case"left":this.position_popup_left(b,c,d,e,f);break;case"right":this.position_popup_right(b,c,d,e,f);break;case"bottom":this.position_popup_bottom(b,c,d,e,f);break;case"top":this.position_popup_top(b,c,d,e,f)}},position_popup_left:function(a,b,c,d,e){var f={top:(d.bottom-d.top)/2+d.top-a.outerHeight()/2,left:e!==!1?d.left-a.outerWidth()-e.width*this.settings.fin_shift_percent:d.left-a.outerWidth(),right:e!==!1?d.left-e.width*this.settings.fin_shift_percent:d.left,bottom:(d.bottom-d.top)/2+d.top+a.outerHeight()/2};this.fix_bounds_and_position(a,f,c,d,"left",e)},position_popup_right:function(a,b,c,d,e){var f={top:(d.bottom-d.top)/2+d.top-a.outerHeight()/2,left:e!==!1?d.right+e.width*this.settings.fin_shift_percent:d.right,right:e!==!1?d.left+a.outerWidth()+e.width*this.settings.fin_shift_percent:d.left+a.outerWidth(),bottom:(d.bottom-d.top)/2+d.top+a.outerHeight()/2};this.fix_bounds_and_position(a,f,c,d,"right",e)},position_popup_top:function(a,b,c,d,e){var f={top:e!==!1?d.top-a.outerHeight()-e.width*this.settings.fin_shift_percent:d.top-a.outerHeight(),left:d.left-(a.outerWidth()-d.width)/2,right:d.right+(a.outerWidth()-d.width)/2,bottom:e!==!1?d.top-e.width*this.settings.fin_shift_percent:d.top};this.fix_bounds_and_position(a,f,c,d,"top",e)},position_popup_bottom:function(a,b,c,d,e){var f={top:e!==!1?d.bottom+e.width*this.settings.fin_shift_percent:d.bottom,left:d.left-(a.outerWidth()-d.width)/2,right:d.right+(a.outerWidth()-d.width)/2,bottom:e!==!1?d.bottom+a.outerHeight()+e.width*this.settings.fin_shift_percent:d.bottom+a.outerHeight()};this.fix_bounds_and_position(a,f,c,d,"bottom",e)},fix_bounds_and_position:function(b,c,d,e,f,g){var h=c;h.left<d.left+this.settings.popup_min_margin?h.left=d.left+this.settings.popup_min_margin:h.right>d.right-this.settings.popup_min_margin&&(h.left=d.right-b.outerWidth()-this.settings.popup_min_margin),h.top>d.bottom-b.outerHeight()-this.settings.popup_min_margin&&f!="bottom"&&f!="top"&&(e.bottom+b.outerHeight()*.05>d.bottom-this.settings.popup_min_margin?h.top=e.bottom+b.outerHeight()*.05-b.outerHeight():h.top=d.bottom-b.outerHeight()-this.settings.popup_min_margin),h.top<this.settings.popup_min_margin&&(h.top=this.settings.popup_min_margin);if(this.settings.display_fin){var i=b.find("."+this.settings.system_classes.fin),j,k;this.remove_fin_classes(i);switch(f){case"bottom":i.addClass(this.settings.system_classes.fin_bottom).addClass(this.settings.fin_bottom_class),j=(e.right-e.left)/2+(e.left-h.left),i.css({left:j+"px",top:"0px",bottom:"auto"});break;case"top":i.addClass(this.settings.system_classes.fin_top).addClass(this.settings.fin_top_class),j=(e.right-e.left)/2+(e.left-h.left),i.css({left:j+"px",top:"auto",bottom:"0px"});break;case"left":i.addClass(this.settings.system_classes.fin_left).addClass(this.settings.fin_left_class),k=(e.bottom-e.top)/2+(e.top-h.top),k<0+i.outerHeight()/3&&(k=0+i.outerHeight()/3),k>h.bottom-h.top-i.outerHeight()*.33&&(k=h.bottom-h.top-i.outerHeight()*.33),i.css({top:k+"px",left:"auto",right:"0px"});break;case"right":i.addClass(this.settings.system_classes.fin_right).addClass(this.settings.fin_right_class),k=(e.bottom-e.top)/2+(e.top-h.top),k<0+i.outerHeight()/3&&(k=0+i.outerHeight()/3),k>h.bottom-h.top-i.outerHeight()*.33&&(k=h.bottom-h.top-i.outerHeight()*.33),i.css({top:k+"px",right:"auto",left:"0px"})}}b.css({top:h.top+"px",left:h.left+"px"}),a("."+this.settings.system_classes.masking_iframe).css({top:h.top+"px",left:h.left+"px",width:b.outerWidth(),height:b.outerHeight()})},remove_fin_classes:function(a){a.removeClass(this.settings.system_classes.fin_left),a.removeClass(this.settings.system_classes.fin_right),a.removeClass(this.settings.system_classes.fin_top),a.removeClass(this.settings.system_classes.fin_bottom)},add_stylesheet:function(b){if(a(document.head).find("."+this.settings.system_classes.default_stylesheet).length==0){var c=a("head").children("style, link"),d=a("<style>"+b+"</style>").attr("type","text/css").addClass(this.settings.system_classes.default_stylesheet);c.length>0?c.eq(0).before(d):a("head").append(d)}}};var c={init:function(c){return this.each(function(){new b(a(this),c)})},get_object:function(){return this.eq(0).data("EdysSearchObject")}};a.fn.site_search=function(b){if(c[b])return c[b].apply(this,Array.prototype.slice.call(arguments,1));if(typeof b=="object"||!b)return c.init.apply(this,arguments);a.error("Method "+b+" does not exist on jQuery.site_search");return null}};window.apply_site_search_module=c})()